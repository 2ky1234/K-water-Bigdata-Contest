##### ?????‚ö??
library(dplyr)
library(tidyverse)
library(fs)

##### ?????????? ???????????? ???? ?????? ?¬à?????????
list.files(path="C:/Users/Administrator/Downloads/20190925013829", pattern = NULL)

##### ?????????? ???????????? ???? ?????? ?¬à??? df??
### ???? ?¬à?????????
# 1
data_dir1 <- "C:/Users/Administrator/Downloads/20190925013829"
#fs::dir_ls(data_dir)
csv_files1 <- fs::dir_ls(data_dir1, regexp="\\.csv$")
#csv_files[1]
#read.csv(csv_files[1])
file1 <- csv_files1 %>% map_dfr(read.csv)

# 2
data_dir2 <- "C:/Users/Administrator/Downloads/20190925013956"
csv_files2 <- fs::dir_ls(data_dir2, regexp="\\.csv$")
file2 <- csv_files2 %>% map_dfr(read.csv)

# 3
data_dir3 <- "C:/Users/Administrator/Downloads/20190925014036"
csv_files3 <- fs::dir_ls(data_dir3, regexp="\\.csv$")
file3 <- csv_files3 %>% map_dfr(read.csv)

# 4
data_dir4 <- "C:/Users/Administrator/Downloads/20190925022100"
csv_files4 <- fs::dir_ls(data_dir4, regexp="\\.csv$")
file4 <- csv_files4 %>% map_dfr(read.csv)

### ??????
all_file <- bind_rows(file1, file2, file3, file4)

##### ???????????? ??????
### ????????, ?????????? ?????? ????????????
stninfo <- read.csv("C:/Users/Administrator/Downloads/stnInfo.csv")
stninfo_simple <- stninfo %>% select(????????, ??????????, ????????, ????)
stninfo_simple <- stninfo_simple %>% rename(????_????????="????????", ????_????="????")
stninfo_simple <- stninfo_simple[!duplicated(stninfo_simple$????????),]
table(duplicated(stninfo_simple$????????))

### ??????
#colnames(all_file)
#colnames(stninfo_simple)
all_file_stn <- left_join(all_file, stninfo_simple, by="????????")
#colnames(all_file_stn)

table(all_file_stn$????????)

##### ???????????? ????
write.csv(all_file_stn, "gisang_data.csv")
